<h1 id="-deployment-cheat-sheet">ðŸ“• Deployment Cheat Sheet</h1>

<ol>
  <li>
    <p><strong>Build docker image on x86 linux</strong></p>

    <p>Since some developers use Mac ARM, we highly recommend using an x86 machine to build your Docker images before deploying them to our cloud to avoid compatibility issues.</p>

    <p>See also:</p>

    <p><a href="https://docs.docker.com/build/building/multi-platform/">Multi-platform</a></p>

    <p><a href="https://blog.jaimyn.dev/how-to-build-multi-architecture-docker-images-on-an-m1-mac/">How to build x86 (and others!) Docker images on an M1 Mac</a></p>

    <p><a href="https://nesin.io/blog/x86-x86-amd64-docker-mac">Run or build x86_64 Docker image on Apple M1, M2, and M3</a></p>
  </li>
  <li>
    <p><strong>Limit the size of your docker logs to save disk usage</strong></p>

    <p>You can config <strong>logging</strong> options for all of your services to limit the size of the docker logs.</p>

    <div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="na">x-common</span><span class="pi">:</span> <span class="nl">&amp;common-config</span>
   <span class="na">restart</span><span class="pi">:</span> <span class="s">always</span>
   <span class="na">logging</span><span class="pi">:</span>
     <span class="na">driver</span><span class="pi">:</span> <span class="s2">"</span><span class="s">json-file"</span>
     <span class="na">options</span><span class="pi">:</span>
       <span class="na">max-size</span><span class="pi">:</span> <span class="s2">"</span><span class="s">100m"</span>
       <span class="na">max-file</span><span class="pi">:</span> <span class="s2">"</span><span class="s">5"</span>
    
 <span class="na">services</span><span class="pi">:</span>
   <span class="na">example</span><span class="pi">:</span>
     <span class="na">&lt;&lt;</span><span class="pi">:</span> <span class="nv">*common-config</span>
     <span class="na">image</span><span class="pi">:</span> <span class="s">example:0.1.0</span>
     <span class="na">container_name</span><span class="pi">:</span> <span class="s">example</span>
     <span class="na">ports</span><span class="pi">:</span>
       <span class="pi">-</span> <span class="s2">"</span><span class="s">8000:8000"</span>
</code></pre></div>    </div>
  </li>
</ol>
